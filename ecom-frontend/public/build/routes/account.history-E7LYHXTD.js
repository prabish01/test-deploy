import{a as C,b as I,c as $,d as E}from"/build/_shared/chunk-O7IFGE4T.js";import{a as n}from"/build/_shared/chunk-EXUR7XYC.js";import"/build/_shared/chunk-CSRUBJRI.js";import{b as D,c as O}from"/build/_shared/chunk-PNHWE22R.js";import{b as y}from"/build/_shared/chunk-FH6P7PUH.js";import"/build/_shared/chunk-VEH472QX.js";import{e as w}from"/build/_shared/chunk-BPJTJPQP.js";import{e as W}from"/build/_shared/chunk-NATW5ST3.js";import{C as p,E as u,a as q,h as S,m as A,p as P,v as L}from"/build/_shared/chunk-MTQ3NDKQ.js";import{d as m}from"/build/_shared/chunk-2QEWK57A.js";var v=m(q(),1);var B=m(u(),1);function V({state:t}){let{t:c}=p(),i="";switch(t){default:case"Draft":case"AddingItems":i="bg-gray-100 text-gray-800";break;case"PaymentAuthorized":case"PaymentSettled":case"Shipped":i="bg-blue-100 text-blue-800";break;case"Delivered":i="bg-green-100 text-green-800";break;case"PartiallyShipped":case"PartiallyDelivered":case"Modifying":case"ArrangingPayment":case"ArrangingAdditionalPayment":i="bg-yellow-100 text-yellow-800";break;case"Cancelled":i="bg-red-100 text-red-800";break}return(0,B.jsx)("span",{className:`text-xs font-medium px-2.5 py-0.5 rounded uppercase whitespace-nowrap ${i}`,children:c(`order.states.${t}`)??c("order.states.Unknown")})}var e=m(u(),1);function T({order:t,isInitiallyExpanded:c=!1,areDetailsInitiallyExpanded:i=!1,className:N}){let[g,h]=(0,v.useState)(c),[f,b]=(0,v.useState)(i),[d,F]=(0,v.useState)(!1),{t:s}=p();return(0,e.jsxs)("div",{className:`border rounded-lg overflow-hidden ${N}`,children:[(0,e.jsxs)("div",{className:`p-4 lg:p-6
            flex flex-row justify-between items-center
            bg-gray-50 border-b
        `,children:[(0,e.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 md:gap-8 lg:gap-16 text-sm",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"block font-medium",children:s("order.placedAt")}),(0,e.jsx)("span",{className:"text-gray-500",title:new Date(t?.orderPlacedAt).toLocaleString(),children:t?.orderPlacedAt?new Date(t.orderPlacedAt).toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"}):"--"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"block font-medium",children:s("order.totalSum")}),(0,e.jsx)("span",{className:"text-gray-500",children:(0,e.jsx)(n,{currencyCode:t?.currencyCode,priceWithTax:t?.totalWithTax})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"block font-medium",children:s("order.number")}),(0,e.jsx)("span",{className:"text-gray-500",children:t?.code||"--"})]})]}),(0,e.jsxs)("div",{className:"gap-4 lg:gap-6 flex flex-col items-end self-stretch justify-between md:flex-row md:items-center self-start",children:[(0,e.jsx)(V,{state:t?.state}),(0,e.jsxs)("div",{className:"flex",role:"group",children:[(0,e.jsxs)(y,{title:s("order.actionsMessage"),className:"bg-white text-sm rounded-r-none border-r-0",children:[(0,e.jsx)("span",{className:"text-xs hidden",children:s("order.actions")}),(0,e.jsx)(W,{className:"w-5 h-5"})]}),(0,e.jsx)(y,{className:"bg-white text-sm rounded-l-none",onClick:()=>h(!g),title:s("order.expand"),children:(0,e.jsx)(w,{className:`w-5 h-5 transition-transform duration-100 ${g&&"rotate-90"}`})})]})]})]}),g&&(0,e.jsxs)("div",{className:"flex flex-col",children:[t?.lines.map((a,r)=>(0,e.jsx)("div",{className:"p-4 lg:p-6 border-b flex flex-row gap-8 justify-between group",children:(0,e.jsxs)("div",{className:"inline-flex justify-center items-center justify gap-4",children:[(0,e.jsx)(P,{to:`/products/${a.productVariant.product.slug}`,className:"hover:opacity-50 transition-opacity",children:(0,e.jsx)("img",{src:a.featuredAsset?.source,className:"w-24 h-24 object-cover rounded-md"})}),(0,e.jsxs)("span",{className:"flex flex-1 flex-col gap-0",children:[(0,e.jsx)(P,{to:`/products/${a.productVariant.product.slug}`,className:"text-black text-sm font-semibold line-clamp-3 md:line-clamp-2 max-w-md hover:text-black/50",title:a.productVariant.name,children:a.productVariant.name}),(0,e.jsxs)("button",{className:"inline-flex gap-2 items-center w-fit text-gray-500 text-sm mt-1",onClick:()=>F(!d),children:[d&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{title:s("common.quantity"),children:a.quantity}),(0,e.jsx)("span",{className:"text-gray-300 select-none",children:"\xD7"}),(0,e.jsx)("span",{title:"Price per unit",children:(0,e.jsx)(n,{currencyCode:a.productVariant.currencyCode,priceWithTax:a.discountedUnitPriceWithTax})}),(0,e.jsx)("span",{className:"text-gray-300 select-none",children:"\u039E"})]}),(0,e.jsx)("span",{title:"Subtotal",children:(0,e.jsx)(n,{currencyCode:a.productVariant.currencyCode,priceWithTax:a.discountedLinePriceWithTax})})]}),(0,e.jsxs)("span",{className:"text-gray-500 text-xs mt-2 tracking-wide",children:[a.fulfillmentLines?.reduce((l,x)=>l+x.quantity,0)===0?s("order.notShipped"):`${a.fulfillmentLines?.reduce((l,x)=>l+x.quantity,0)} ${s("common.or")} ${a.quantity} ${s("order.items.fulfilled")}`,a.fulfillmentLines?.filter(l=>l.quantity>0).map((l,x)=>(0,e.jsxs)("span",{className:"block first:mt-2",title:new Date(l.fulfillment.updatedAt).toLocaleString(),children:[l.fulfillment.state,":"," ",new Intl.DateTimeFormat(void 0,{dateStyle:"medium"}).format(new Date(l.fulfillment.updatedAt))]},x))]})]})]})},r)),(0,e.jsxs)("div",{className:"p-2 lg:py-3 lg:px-6 gap-2 lg:gap-6 grid grid-cols-2 sm:flex justify-end items-center",children:[t?.fulfillments?.map((a,r)=>(0,e.jsxs)(y,{onClickCapture:()=>alert(`${s("trackAlert")} "${a.trackingCode}"`),className:"text-xs",children:[s("order.trackPackage")," ",t.fulfillments?.length==1?"":`#${r+1}`]},r)),(0,e.jsxs)(y,{onClick:()=>b(!f),className:"col-start-2",children:[(0,e.jsx)("span",{className:"text-xs",children:s("order.detailedOverview")}),(0,e.jsx)(w,{className:`w-5 h-5 transition-transform duration-100 ${f&&"rotate-90"}`})]})]}),f&&(0,e.jsxs)("div",{className:"p-2 lg:p-3 grid grid-cols-2 gap-1 text-sm max-w-sm self-center md:self-end",children:[(0,e.jsx)("h6",{className:"font-medium col-span-full",children:s("order.summary")}),(0,e.jsx)("span",{children:s("order.items.subtotal")}),(0,e.jsx)("span",{className:"text-end",children:(0,e.jsx)(n,{currencyCode:t?.currencyCode,priceWithTax:t?.subTotalWithTax})}),(0,e.jsx)("span",{children:s("order.shippingAndHandling")}),(0,e.jsx)("span",{className:"text-end",children:(0,e.jsx)(n,{currencyCode:t?.currencyCode,priceWithTax:t?.shippingLines.reduce((a,r)=>a+r.priceWithTax,0)})}),(0,e.jsx)("span",{children:s("order.totalWithoutTax")}),(0,e.jsx)("span",{className:"text-end",children:(0,e.jsx)(n,{currencyCode:t?.currencyCode,priceWithTax:t?.taxSummary.reduce((a,r)=>a+r.taxBase,0)})}),(0,e.jsx)("span",{children:s("order.estimatedTax")}),(0,e.jsx)("span",{className:"text-end",children:(0,e.jsx)(n,{currencyCode:t?.currencyCode,priceWithTax:t?.taxSummary.reduce((a,r)=>a+r.taxTotal,0)})}),(0,e.jsx)("span",{children:s("order.total")}),t?.totalWithTax&&t.discounts?(0,e.jsx)("span",{className:"text-end",children:(0,e.jsx)(n,{currencyCode:t?.currencyCode,priceWithTax:t.totalWithTax-t?.discounts.reduce((a,r)=>a+r.amountWithTax,0)})}):(0,e.jsx)("span",{className:"text-end",children:"--"}),(0,e.jsx)("span",{children:s("order.appliedCoupons")}),(0,e.jsx)("span",{className:"text-end",children:(0,e.jsx)(n,{currencyCode:t?.currencyCode,priceWithTax:t?.discounts.reduce((a,r)=>a+r.amountWithTax,0)})}),(0,e.jsx)("span",{className:"font-medium",children:s("order.grandTotal")}),(0,e.jsx)("span",{className:"font-medium text-end",children:(0,e.jsx)(n,{currencyCode:t?.currencyCode,priceWithTax:t?.totalWithTax})})]})]})]})}var o=m(u(),1),H=10,k=new Set([H,20,30]),ie=C(k);function j(){let{orderList:t,appliedPaginationLimit:c,appliedPaginationPage:i}=L(),N=A(),g=S(),{t:h}=p(),f=I(i,c),b=$(i,c,t.items.length);return(0,o.jsxs)("div",{className:"pt-10 relative",children:[g.state!=="idle"&&(0,o.jsx)("div",{className:"absolute top-0 left-0 w-full h-full z-100 bg-white bg-opacity-75"}),t.items.length===0&&(0,o.jsx)("div",{className:"py-16 text-3xl text-center italic text-gray-300 select-none flex justify-center items-center",children:t.totalItems===0?h("order.historyEmpty"):h("order.historyEnd")}),t.items?.map(d=>(0,o.jsx)(T,{order:d,isInitiallyExpanded:!0,className:"mb-10"},d.code)),(0,o.jsxs)("div",{className:"flex flex-row justify-between items-center gap-4",children:[(0,o.jsxs)("span",{className:"self-start text-gray-500 text-sm ml-4 lg:ml-6 mt-2",children:["Showing orders ",f," to ",b," of"," ",t.totalItems]}),(0,o.jsx)(D,{validator:O(C(k)),method:"get",onChange:d=>N(d.currentTarget,{preventScrollReset:!0}),preventScrollReset:!0,children:(0,o.jsx)(E,{appliedPaginationLimit:c,allowedPaginationLimits:k,totalItems:t.totalItems,appliedPaginationPage:i})})]})]})}export{j as default};
