import{a as c}from"/build/_shared/chunk-QTXY3SDL.js";import{a as N}from"/build/_shared/chunk-HZSDWWGA.js";import{a as u}from"/build/_shared/chunk-W4ZSGTTH.js";import{b as x,c as y,d}from"/build/_shared/chunk-PNHWE22R.js";import{b as R}from"/build/_shared/chunk-FH6P7PUH.js";import{d as E}from"/build/_shared/chunk-BPJTJPQP.js";import{f as P}from"/build/_shared/chunk-NATW5ST3.js";import{C as h,E as m,a as k,h as w,w as v}from"/build/_shared/chunk-MTQ3NDKQ.js";import{d as n}from"/build/_shared/chunk-2QEWK57A.js";var o=n(k(),1);var t=n(m(),1);function b({heading:e,message:a}){return(0,t.jsx)("div",{className:"rounded-md bg-green-50 p-4 max-w-lg",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(E,{className:"h-5 w-5 text-green-400","aria-hidden":"true"})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-green-800",children:e}),(0,t.jsx)("p",{className:"text-sm text-green-700 mt-2",children:a})]})]})})}function D(e){return e&&e.message!==void 0&&e.errorCode!==void 0}function S(e){return e&&e.fieldErrors!==void 0}var r=n(m(),1),q=y(d.object({currentPassword:d.string().min(1,{message:"Password is required"}),newPassword:d.string().min(1,{message:"Password is required"}),confirmPassword:d.string().min(1,{message:"Password is required"})}).refine(({newPassword:e,confirmPassword:a})=>e===a,{path:["confirmPassword"],message:"Passwords must match"}));function M(){let[e,a]=(0,o.useState)(!1),[V,l]=(0,o.useState)(!1),[f,g]=(0,o.useState)(),i=v(),{state:H}=w(),p=(0,o.useRef)(null),{t:s}=h();return(0,o.useEffect)(()=>{if(!S(i)){if(D(i)){g(i.message),l(!1);return}i?.success&&(g(void 0),l(!0),a(!1),p.current?.reset())}},[i]),(0,r.jsx)(x,{validator:q,method:"post",formRef:p,children:(0,r.jsxs)("div",{className:"p-4 space-y-4",children:[e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"gap-4 grid grid-cols-1 md:grid-cols-2",children:(0,r.jsx)("div",{children:(0,r.jsx)(c,{required:!0,label:s("account.currentPassword"),name:"currentPassword",type:"password"})})}),(0,r.jsxs)("div",{className:"gap-4 grid grid-cols-1 md:grid-cols-2",children:[(0,r.jsx)("div",{children:(0,r.jsx)(c,{required:!0,label:s("account.newPassword"),name:"newPassword",type:"password"})}),(0,r.jsx)("div",{children:(0,r.jsx)(c,{required:!0,label:s("account.confirmPassword"),name:"confirmPassword",type:"password"})})]})]}),V&&(0,r.jsx)(b,{heading:s("account.pwdSuccessHeading"),message:s("account.pwdSuccessMessage")}),f&&(0,r.jsx)(N,{heading:s("account.pwdErrorMessage"),message:f}),e?(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(u,{type:"submit",isSubmitting:H==="submitting",children:s("account.savePassword")}),(0,r.jsx)(R,{type:"reset",onClick:()=>a(!1),children:s("common.cancel")})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(u,{type:"button",onClick:()=>a(!0),children:[(0,r.jsx)(P,{className:"w-4 h-4"})," ",s("account.changePassword")]})})]})})}export{M as default};
